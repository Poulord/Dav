<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lumina Studio ‚Äî Laboratorio visual</title>
  <link rel="stylesheet" href="styles.css" />
  <script async src="https://docs.opencv.org/4.x/opencv.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <div class="page">
    <header class="header hero">
      <div class="hero-top">
        <div class="badge badge-neo">Lumina Studio</div>
        <div class="hero-tag">Laboratorio visual en tiempo real</div>
      </div>
      <h1>Explora fusiones creativas entre im√°genes</h1>
      <p>
        Ajusta combinaciones, mezcla intensidades y prueba nuevas formas de
        superponer im√°genes con OpenCV.js desde tu navegador.
      </p>
      <div class="hero-stats">
        <div>
          <span class="stat-label">Modo</span>
          <strong>Experimental</strong>
        </div>
        <div>
          <span class="stat-label">Formato</span>
          <strong>Im√°genes locales</strong>
        </div>
        <div>
          <span class="stat-label">Motor</span>
          <strong>OpenCV.js</strong>
        </div>
      </div>
    </header>
    
    <section class="info-banner intro-panel">
      <div>
        <h3>¬øQu√© hace este laboratorio?</h3>
        <p>
          Combina dos im√°genes mediante filtros matem√°ticos y l√≥gicos para crear
          composiciones, fusiones y efectos de iluminaci√≥n.
        </p>
      </div>
      <p>
        Elige un filtro, ajusta el nivel de mezcla cuando corresponda y obt√©n el
        resultado en tiempo real. Ideal para prototipar ideas visuales r√°pidas.
      </p>
    </section>

    <main class="grid">
      <section class="card operation-card" data-category="arithmetic" id="operationCard">
        <div class="operation-header">
          <div class="operation-icon" id="operationIcon" aria-hidden="true">‚ûï</div>
          <div>
            <h3>Filtro activo</h3>
            <p class="muted">Define c√≥mo se mezcla la informaci√≥n entre A y B.</p>
          </div>
        </div>

        <label class="field">
          Filtro
          <div class="field-control">
            <select id="op">
              <option value="add">add (A + B)</option>
              <option value="subtract">subtract (A - B)</option>
              <option value="multiply">multiply (A √ó B)</option>
              <option value="lighten">lighten (max)</option>
              <option value="blend">blend (addWeighted)</option>
            </select>
            <span class="hint-icon" title="Elige el tipo de operaci√≥n entre las im√°genes">‚ìò</span>
          </div>
        </label>

        <div id="blendControls" class="blend-controls" style="display: none;">
          <label class="field">
            Alpha (A)
            <input id="alpha" type="range" min="0" max="1" value="0.5" step="0.01" />
          </label>
          <div class="footer-note">Beta (B) = 1 - alpha</div>
        </div>

        <div class="operation-explanation">
          <h4>Explicaci√≥n del filtro</h4>
          <p id="filterExplanation"></p>
        </div>
      </section>

      <section class="card image-card">
        <div class="card-header">
          <h3>Imagen A</h3>
          <span class="pill">Base</span>
        </div>
        <div class="upload-zone" id="uploadZoneA">
          <div class="upload-placeholder">
            <span class="placeholder-icon">üñºÔ∏è</span>
            <div>
              <strong>Arrastra y suelta la imagen</strong>
              <p>o haz clic para seleccionar desde tu dispositivo</p>
            </div>
          </div>
          <input id="fileA" type="file" accept="image/*" />
        </div>
        <div class="upload-meta">
          <span id="fileNameA">Sin archivo</span>
          <span id="resolutionA">0√ó0</span>
        </div>
        <canvas id="canvasA"></canvas>
      </section>

      <section class="card image-card">
        <div class="card-header">
          <h3>Imagen B</h3>
          <span class="pill">Secundaria</span>
        </div>
        <div class="upload-zone" id="uploadZoneB">
          <div class="upload-placeholder">
            <span class="placeholder-icon">üß©</span>
            <div>
              <strong>Arrastra y suelta la imagen</strong>
              <p>o haz clic para seleccionar desde tu dispositivo</p>
            </div>
          </div>
          <input id="fileB" type="file" accept="image/*" />
        </div>
        <div class="upload-meta">
          <span id="fileNameB">Sin archivo</span>
          <span id="resolutionB">0√ó0</span>
        </div>
        <canvas id="canvasB"></canvas>
      </section>

      <section class="card controls-card">
        <h3>Herramientas</h3>
        <div class="controls">
          <div class="status" id="status">Cargando OpenCV.js‚Ä¶</div>

          <label class="toggle">
            <input id="autoResize" type="checkbox" checked />
            <span class="toggle-ui" aria-hidden="true"></span>
            Ajustar tama√±os autom√°ticamente
            <span class="hint-icon" title="Si las im√°genes no tienen la misma resoluci√≥n, se ajusta B a A">‚ìò</span>
          </label>

          <div class="buttons">
            <button class="primary" id="run">
              <span class="btn-icon">‚ö°</span>
              <span class="btn-text" data-role="label">Aplicar operaci√≥n</span>
            </button>
            <button class="secondary" id="clear">Limpiar</button>
          </div>
        </div>
      </section>

      <section class="card result-card" id="resultCard">
        <div class="card-header">
          <div>
            <h3>Resultado</h3>
            <p class="muted">Vista final de la operaci√≥n aplicada.</p>
          </div>
          <div class="result-actions">
            <label class="toggle small">
              <input id="compareToggle" type="checkbox" />
              <span class="toggle-ui" aria-hidden="true"></span>
              Comparar A/B
            </label>
            <button class="secondary" id="download">
              ‚¨áÔ∏è Descargar imagen
            </button>
          </div>
        </div>
        <div class="comparison-grid" id="comparisonGrid">
          <div>
            <p>Imagen A</p>
            <img id="compareA" alt="Vista previa de la imagen A" />
          </div>
          <div>
            <p>Imagen B</p>
            <img id="compareB" alt="Vista previa de la imagen B" />
          </div>
        </div>
        <div class="result-canvas">
          <canvas id="canvasOut"></canvas>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
